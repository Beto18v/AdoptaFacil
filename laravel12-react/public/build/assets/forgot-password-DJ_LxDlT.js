import{r as a,j as e,$ as g,L as b}from"./app-C9a0Z2GV.js";import{I as j}from"./input-error-CeM_PcsI.js";import{T as v}from"./theme-switcher-D1-KvWmV.js";import{B as w}from"./button-Cd7vGOiK.js";import{I as y}from"./input-DOoS4fzs.js";import{L as N}from"./label-CyhaV5PO.js";import{L as k}from"./Logo-BWfBvknf.js";import{L as E}from"./loader-circle-mPGIrds-.js";import"./index-wTHh6_rQ.js";import"./index-BT6umcoc.js";import"./createLucideIcon-CDVaj1tW.js";function M({status:l}){const[o,p]=a.useState({email:""}),[c,m]=a.useState(!1),[f,t]=a.useState({}),[d,u]=a.useState(""),h=async n=>{n.preventDefault(),m(!0),t({}),u("");try{const r=await fetch("http://localhost:8080/api/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o.email})});let s;const x=r.headers.get("content-type");x&&x.includes("application/json")?s=await r.json():s={message:await r.text()},r.ok?u("Se ha enviado un código de recuperación a tu email."):r.status===400?t({email:s.message||"El email no está registrado en el sistema."}):r.status===500?t({email:"Error interno del servidor. Inténtalo de nuevo."}):t({email:s.message||"Error desconocido. Inténtalo de nuevo."})}catch(r){console.error("Error de conexión:",r),t({email:"Error de conexión. Verifica que el servidor esté ejecutándose."})}finally{m(!1)}};let i=l;return l==="A reset link will be sent if the account exists."&&(i="Se enviará un enlace de restablecimiento si la cuenta existe."),e.jsxs("div",{className:"flex h-screen items-center justify-center bg-gradient-to-r from-green-400 to-blue-500 dark:from-green-600 dark:to-blue-700",children:[e.jsxs("div",{className:"container w-full max-w-md rounded-lg border border-white/20 bg-white/10 p-5 text-center shadow-lg backdrop-blur-md transition-transform duration-300 ease-in-out hover:scale-[1.005] hover:shadow-xl",children:[e.jsx(g,{href:route("index"),children:e.jsx("img",{src:k,alt:"Logo",className:"mx-auto mb-8 h-36 w-56"})})," ",e.jsx(b,{title:"Recuperar contraseña"}),e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Recuperar contraseña"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Ingresa tu correo electrónico para recibir un código de recuperación"})]}),i&&e.jsx("div",{className:"mb-4 text-center text-sm font-medium text-green-600 dark:text-green-400",children:i}),d&&e.jsx("div",{className:"mb-4 text-center text-sm font-medium text-green-600 dark:text-green-400",children:d}),e.jsx("form",{className:"flex flex-col gap-6",onSubmit:h,children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(N,{htmlFor:"email",children:"Correo Electrónico"}),e.jsx(y,{id:"email",type:"email",name:"email",value:o.email,autoFocus:!0,onChange:n=>p({...o,email:n.target.value}),placeholder:"email@example.com",className:"w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-transparent focus:ring-2 focus:ring-blue-500 focus:outline-none"}),e.jsx(j,{message:f.email})]}),e.jsxs(w,{type:"submit",className:"focus:ring-opacity-50 w-full transform rounded-lg bg-blue-500 px-4 py-2 text-white transition-all duration-300 ease-in-out hover:scale-105 hover:bg-blue-600 focus:ring-2 focus:ring-blue-500 focus:outline-none dark:bg-blue-700 dark:hover:bg-blue-800",disabled:c,children:[c&&e.jsx(E,{className:"h-4 w-4 animate-spin"}),"Enviar código de recuperación"]})]})}),e.jsxs("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:[e.jsx("span",{children:"O, vuelve a "}),e.jsx(g,{href:route("login"),className:"text-blue-500 hover:underline dark:text-gray-100",children:"iniciar sesión"})]})]}),e.jsx(v,{})]})}export{M as default};
