import{r as u,m as w,j as e,K as F,L,$ as z,S as N}from"./app-C9a0Z2GV.js";import{I as v}from"./input-error-CeM_PcsI.js";import{B as p}from"./button-Cd7vGOiK.js";import{I as y}from"./input-DOoS4fzs.js";import{L as g}from"./label-CyhaV5PO.js";import{H as E,S as M,z as q}from"./heading-small-BGfIeHfH.js";import{D as U,a as $,b as H,d as R,e as _,f as B,g as G}from"./dialog-BgfS5c9J.js";import{T as O}from"./theme-switcher-D1-KvWmV.js";import{A as J,a as K,b as V}from"./avatar-DfpzBFwZ.js";import{A as W}from"./app-layout-BiuVrvCM.js";import{c as X}from"./createLucideIcon-CDVaj1tW.js";import{X as Q}from"./x-CWg9G-ba.js";import"./index-wTHh6_rQ.js";import"./avatar-utils-DC3zEnz9.js";import"./index-BT6umcoc.js";import"./index-D-6MT3mC.js";import"./Logo-BWfBvknf.js";import"./LogoWhite-CZ6C_-JM.js";import"./chevron-right-BY3h9dfG.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Z=X("Camera",Y);function ee(){const f=u.useRef(null),{data:h,setData:a,delete:o,processing:x,reset:m,errors:j,clearErrors:l}=w({password:""}),b=r=>{r.preventDefault(),o(route("profile.destroy"),{preserveScroll:!0,onSuccess:()=>t(),onError:()=>{var n;return(n=f.current)==null?void 0:n.focus()},onFinish:()=>m()})},t=()=>{l(),m()};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(E,{title:"Eliminar cuenta",description:"Elimina tu cuenta y todos sus recursos"}),e.jsxs("div",{className:"space-y-4 rounded-lg border border-red-100 bg-red-50 p-4 dark:border-red-200/10 dark:bg-red-700/10",children:[e.jsxs("div",{className:"relative space-y-0.5 text-red-600 dark:text-red-100",children:[e.jsx("p",{className:"font-medium",children:"Advertencia"}),e.jsx("p",{className:"text-sm",children:"Proceda con precaución, esta acción no se puede deshacer."})]}),e.jsxs(U,{children:[e.jsx($,{asChild:!0,children:e.jsx(p,{variant:"destructive",children:"Eliminar cuenta"})}),e.jsxs(H,{children:[e.jsx(R,{children:"¿Estás seguro de que quieres eliminar tu cuenta?"}),e.jsx(_,{children:"Una vez que tu cuenta sea eliminada, todos sus recursos y datos también serán eliminados permanentemente. Por favor, ingresa tu contraseña para confirmar que deseas eliminar permanentemente tu cuenta."}),e.jsxs("form",{className:"space-y-6",onSubmit:b,children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"password",className:"sr-only",children:"Contraseña"}),e.jsx(y,{id:"password",type:"password",name:"password",ref:f,value:h.password,onChange:r=>a("password",r.target.value),placeholder:"Contraseña",autoComplete:"current-password"}),e.jsx(v,{message:j.password})]}),e.jsxs(B,{className:"gap-2",children:[e.jsx(G,{asChild:!0,children:e.jsx(p,{variant:"secondary",onClick:t,children:"Cancelar"})}),e.jsx(p,{variant:"destructive",disabled:x,asChild:!0,children:e.jsx("button",{type:"submit",children:"Eliminar cuenta"})})]})]})]})]})]})]})}const ae=[{title:"Configuración de perfil",href:"/settings/profile"}];function Ne({mustVerifyEmail:f,status:h}){const{auth:a}=F().props,o=u.useRef(null),[x,m]=u.useState(a.user.avatar?`/storage/${a.user.avatar}`:null),[j,l]=u.useState(!1),[b,t]=u.useState(!1),{data:r,setData:n,errors:d,processing:k,recentlySuccessful:D,setError:C}=w({name:a.user.name||"",email:a.user.email||"",avatar:null}),S=D||h==="profile-updated"||b;u.useEffect(()=>{if(S){l(!0);const s=setTimeout(()=>{l(!1)},3e3);return()=>clearTimeout(s)}else l(!1)},[S]),u.useEffect(()=>{a.user.avatar?m(`/storage/${a.user.avatar}`):m(null)},[a.user.avatar]);const T=s=>{var c;const i=(c=s.target.files)==null?void 0:c[0];if(i){if(!i.type.startsWith("image/")){alert("Por favor, selecciona un archivo de imagen válido.");return}if(i.size>2*1024*1024){alert("El archivo es demasiado grande. El tamaño máximo es 2MB.");return}n("avatar",i);const P=URL.createObjectURL(i);m(P)}},A=()=>{if(r.avatar){n("avatar",null),m(a.user.avatar?`/storage/${a.user.avatar}`:null),o.current&&(o.current.value="");return}a.user.avatar&&N.post(route("profile.update"),{name:r.name,email:r.email,avatar:null,_method:"PATCH"},{preserveScroll:!0,onSuccess:()=>{t(!0),setTimeout(()=>t(!1),500)},onError:s=>{t(!1),l(!1)}})},I=s=>{s.preventDefault(),r.avatar?N.post(route("profile.update"),{name:r.name,email:r.email,avatar:r.avatar,_method:"PATCH"},{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{n("avatar",null),o.current&&(o.current.value=""),t(!0),setTimeout(()=>t(!1),500)},onError:i=>{Object.keys(i).forEach(c=>{C(c,i[c])}),t(!1),l(!1)}}):N.post(route("profile.update"),{name:r.name,email:r.email,_method:"PATCH"},{preserveScroll:!0,onSuccess:()=>{t(!0),setTimeout(()=>t(!1),500)},onError:i=>{Object.keys(i).forEach(c=>{C(c,i[c])}),t(!1),l(!1)}})};return e.jsxs(W,{breadcrumbs:ae,children:[e.jsx(L,{title:"Profile settings"}),e.jsxs(M,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(E,{title:"Información de perfil",description:"Mantenga su información actualizada"}),e.jsxs("form",{onSubmit:I,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsx(g,{children:"Foto de perfil"}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var s;return(s=o.current)==null?void 0:s.click()},children:[e.jsxs(J,{className:"h-20 w-20 transition-all duration-200 group-hover:brightness-75",children:[e.jsx(K,{src:x||(a.user.avatar?`/storage/${a.user.avatar}`:void 0),alt:a.user.name,className:"h-full w-full object-cover"}),e.jsx(V,{className:"text-lg",children:a.user.name.substring(0,2).toUpperCase()})]}),e.jsx("div",{className:"bg-opacity-50 absolute inset-0 flex items-center justify-center rounded-full bg-black opacity-0 transition-opacity duration-200 group-hover:opacity-100",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx(Z,{className:"mx-auto mb-1 h-5 w-5"}),e.jsx("span",{className:"text-xs font-medium",children:"Cambiar"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"flex gap-2",children:(x||a.user.avatar)&&e.jsxs(p,{type:"button",variant:"outline",size:"sm",onClick:A,className:"flex items-center gap-2 text-red-600 hover:text-red-700",children:[e.jsx(Q,{className:"h-4 w-4"}),"Eliminar"]})}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Haz clic en la foto para cambiarla.",e.jsx("br",{}),"JPG, PNG o GIF. Máximo 2MB."]})]})]}),e.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:T,className:"hidden"}),e.jsx(v,{className:"mt-2",message:d.avatar})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"name",children:"Nombre"}),e.jsx(y,{id:"name",className:`mt-1 block w-full ${d.name?"border-red-500":""}`,value:r.name,onChange:s=>n("name",s.target.value),required:!0,autoComplete:"name",placeholder:"Ingresa tu nombre completo"}),e.jsx(v,{className:"mt-2",message:d.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"email",children:"Correo electrónico"}),e.jsx(y,{id:"email",type:"email",className:`mt-1 block w-full ${d.email?"border-red-500":""}`,value:r.email,onChange:s=>n("email",s.target.value),required:!0,autoComplete:"username",placeholder:"tu@email.com"}),e.jsx(v,{className:"mt-2",message:d.email})]}),f&&a.user.email_verified_at===null&&e.jsxs("div",{children:[e.jsxs("p",{className:"-mt-4 text-sm text-muted-foreground",children:["Tu correo electrónico no está verificado."," ",e.jsx(z,{href:route("verification.send"),method:"post",as:"button",className:"text-foreground underline decoration-neutral-300 underline-offset-4 transition-colors duration-300 ease-out hover:decoration-current! dark:decoration-neutral-500",children:"Clic aquí para reenviar el correo electrónico de verificación."})]}),h==="verification-link-sent"&&e.jsx("div",{className:"mt-2 text-sm font-medium text-green-600",children:"Se ha enviado un nuevo enlace de verificación a tu correo electrónico."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(p,{type:"submit",disabled:k,children:"Guardar"}),e.jsx(q,{show:j,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-neutral-600",children:"Cambio realizado"})})]})]})]}),e.jsx(ee,{})]}),e.jsx(O,{})]})}export{Ne as default};
