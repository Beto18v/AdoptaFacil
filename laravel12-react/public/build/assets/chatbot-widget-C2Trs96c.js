import{r as a,j as e}from"./app-C9a0Z2GV.js";const p=()=>{const[d,i]=a.useState(!1),[n,c]=a.useState([{id:1,text:"Â¡Hola! Soy tu asistente de adopciones. Â¿En quÃ© puedo ayudarte hoy? ðŸ¶",sender:"bot"}]),[o,x]=a.useState(""),[s,h]=a.useState(!1),u=a.useRef(null),m=()=>{var r;(r=u.current)==null||r.scrollIntoView({behavior:"smooth"})};a.useEffect(()=>{m()},[n]);const y=async r=>{try{const t=await fetch("http://127.0.0.1:8001/chat/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:r})});if(!t.ok)throw new Error("Error en la respuesta del servicio");return(await t.json()).reply}catch(t){return console.error("Error al conectar con el servicio:",t),"Lo siento, hay un problema con la conexiÃ³n. IntÃ©ntalo de nuevo mÃ¡s tarde. ðŸ¾"}},g=async()=>{if(o.trim()===""||s)return;const r={id:n.length+1,text:o,sender:"user"};c(l=>[...l,r]),x(""),h(!0);const t=await y(o),b={id:n.length+2,text:t,sender:"bot"};c(l=>[...l,b]),h(!1)},f=r=>{r.key==="Enter"&&!s&&g()};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>i(!d),className:"fixed right-4 bottom-6 z-50 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 p-4 text-white shadow-2xl transition-all duration-300 hover:scale-110 hover:shadow-blue-500/50","aria-label":"Abrir chat",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),d&&e.jsxs("div",{className:"fixed right-4 bottom-22 z-50 flex h-96 w-80 flex-col rounded-2xl border border-gray-200 bg-white shadow-2xl transition-all duration-300 animate-in fade-in-0 zoom-in-95 dark:border-gray-700 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-t-2xl bg-gradient-to-r from-blue-500 to-blue-600 p-4 text-white",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-white/20",children:e.jsx("span",{className:"text-sm",children:"ðŸ¾"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"Asistente de Adopciones"})]}),e.jsx("button",{onClick:()=>i(!1),className:"text-white transition-colors hover:text-gray-200","aria-label":"Cerrar chat",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 space-y-4 overflow-y-auto bg-gray-50 p-4 dark:bg-gray-900",children:[n.map(r=>e.jsxs("div",{className:`flex items-end space-x-2 ${r.sender==="user"?"justify-end":"justify-start"}`,children:[r.sender==="bot"&&e.jsx("div",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-blue-500",children:e.jsx("span",{className:"text-xs text-white",children:"ðŸ¾"})}),e.jsx("div",{className:`max-w-xs rounded-2xl px-4 py-3 shadow-sm ${r.sender==="user"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white":"border border-gray-200 bg-white text-gray-800 dark:border-gray-600 dark:bg-gray-700 dark:text-white"}`,children:r.text}),r.sender==="user"&&e.jsx("div",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-gray-300 dark:bg-gray-600",children:e.jsx("span",{className:"text-xs",children:"ðŸ‘¤"})})]},r.id)),s&&e.jsxs("div",{className:"flex items-end justify-start space-x-2",children:[e.jsx("div",{className:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-blue-500",children:e.jsx("span",{className:"text-xs text-white",children:"ðŸ¾"})}),e.jsx("div",{className:"max-w-xs rounded-2xl border border-gray-200 bg-white px-4 py-3 text-gray-800 shadow-sm dark:border-gray-600 dark:bg-gray-700 dark:text-white",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400"}),e.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"h-2 w-2 animate-bounce rounded-full bg-gray-400",style:{animationDelay:"0.2s"}})]})})]}),e.jsx("div",{ref:u})]}),e.jsxs("div",{className:"flex rounded-b-2xl border-t border-gray-200 bg-white p-4 dark:border-gray-700 dark:bg-gray-800",children:[e.jsx("input",{type:"text",value:o,onChange:r=>x(r.target.value),onKeyPress:f,placeholder:"Escribe tu mensaje...",disabled:s,className:`flex-1 rounded-l-xl border px-4 py-3 transition-all focus:ring-2 focus:ring-blue-500 focus:outline-none ${s?"cursor-not-allowed border-gray-300 bg-gray-100 text-gray-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400":"border-gray-300 bg-white text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white"}`}),e.jsx("button",{onClick:g,disabled:s,className:`rounded-r-xl px-4 py-3 text-white transition-all duration-200 ${s?"cursor-not-allowed bg-gray-400":"bg-gradient-to-r from-blue-500 to-blue-600 hover:scale-105 hover:shadow-lg"}`,children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})]})};export{p as C};
