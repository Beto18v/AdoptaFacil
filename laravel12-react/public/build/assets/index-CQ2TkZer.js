import{r as o,j as e,L as C,S as z}from"./app-C9a0Z2GV.js";import{T as R}from"./theme-switcher-D1-KvWmV.js";import{B as T}from"./badge-BgUZm6Q0.js";import{B as u}from"./button-Cd7vGOiK.js";import{T as E,a as q,b as k,c as l,d as A,e as c}from"./table-VTONTYtq.js";import{A as M}from"./app-layout-BiuVrvCM.js";import{T as P}from"./trash-2-C3AMxhCd.js";import"./index-wTHh6_rQ.js";import"./index-BT6umcoc.js";import"./createLucideIcon-CDVaj1tW.js";import"./avatar-utils-DC3zEnz9.js";import"./x-CWg9G-ba.js";import"./index-D-6MT3mC.js";import"./avatar-DfpzBFwZ.js";import"./Logo-BWfBvknf.js";import"./LogoWhite-CZ6C_-JM.js";import"./chevron-right-BY3h9dfG.js";function Z({auth:g,solicitudes:x}){var y,b,p,j;const[r,d]=o.useState(null),[N,i]=o.useState(!1),[t,n]=o.useState(""),[m,h]=o.useState(!1),v=async()=>{var a;if(r)try{if((await fetch(route("solicitudes.updateEstado",r.id),{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":((a=document.querySelector("meta[name=csrf-token]"))==null?void 0:a.content)||""},body:JSON.stringify({estado:"Aprobada"})})).ok)d({...r,estado:"Aprobada"}),window.location.reload();else throw new Error("Error en la respuesta del servidor")}catch(s){console.error("Error al aprobar solicitud:",s),alert("Error al aprobar la solicitud. Por favor, intenta de nuevo.")}},f=async()=>{var a;if(r){h(!0);try{const s=await fetch(route("solicitudes.updateEstado",r.id),{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":((a=document.querySelector("meta[name=csrf-token]"))==null?void 0:a.content)||""},body:JSON.stringify({estado:"Rechazada",comentario_rechazo:t})});s.ok&&(await s.json(),d({...r,estado:"Rechazada",comentario_rechazo:t}),i(!1),n(""),window.location.reload())}catch(s){console.error("Error al rechazar solicitud:",s),alert("Error al procesar la solicitud. Por favor, intenta de nuevo.")}finally{h(!1)}}},_=a=>{confirm("¿Estás seguro de que quieres cancelar esta solicitud?")&&z.delete(route("solicitudes.destroy",a),{preserveScroll:!0})},w=a=>{switch(a){case"Aprobada":return"bg-green-100 text-green-800 border-green-300";case"En Proceso":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"Rechazada":case"Cancelada":return"bg-red-100 text-red-800 border-red-300";default:return"bg-blue-100 text-blue-800 border-blue-300"}},S=[{title:"Solicitudes",href:route("solicitudes.index")}];return e.jsxs(M,{breadcrumbs:S,children:[e.jsx(C,{title:"Mis Solicitudes"}),e.jsxs("main",{className:"flex-1 overflow-y-auto bg-gradient-to-r from-green-400 to-blue-500 p-6 dark:from-green-600 dark:to-blue-700",children:[e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800",children:e.jsx("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:x.length>0?e.jsxs(E,{children:[e.jsx(q,{children:e.jsxs(k,{children:[e.jsx(l,{children:"Mascota"}),e.jsx(l,{children:"Estado"}),e.jsx(l,{children:"Fecha de Solicitud"}),e.jsx(l,{className:"text-right",children:"Acciones"})]})}),e.jsx(A,{children:x.map(a=>e.jsxs(k,{children:[e.jsx(c,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:a.mascota.imagen?`/storage/${a.mascota.imagen}`:"https://via.placeholder.com/150",alt:a.mascota.nombre,className:"h-10 w-10 rounded-full object-cover"}),e.jsx("span",{children:a.mascota.nombre})]})}),e.jsx(c,{children:e.jsx(T,{variant:"outline",className:w(a.estado),children:a.estado})}),e.jsx(c,{children:new Date(a.created_at).toLocaleDateString()}),e.jsxs(c,{className:"flex justify-end gap-2 text-right",children:[e.jsx(u,{variant:"secondary",size:"sm",className:"bg-gray-500 text-white hover:bg-gray-600",onClick:()=>d(a),children:"Ver Detalle"}),a.estado==="Enviada"&&e.jsxs(u,{variant:"destructive",size:"icon",onClick:()=>_(a.id),children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Cancelar Solicitud"})]})]})]},a.id))})]}):e.jsx("p",{children:"Aún no has realizado ninguna solicitud de adopción."})})})})}),r&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"max-h-[90vh] w-full max-w-4xl overflow-y-auto rounded-xl bg-white p-6 shadow-2xl dark:bg-gray-800",children:[e.jsx("button",{className:"absolute top-3 right-3 z-10 rounded-full bg-white p-1 text-2xl text-gray-400 shadow transition-colors hover:text-red-500 dark:bg-gray-900",onClick:()=>d(null),"aria-label":"Cerrar",children:"×"}),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"mb-6 text-center text-2xl font-bold text-gray-800 dark:text-white",children:"Detalle de Solicitud de Adopción"}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-lg font-semibold text-green-600 dark:text-green-400",children:"Datos del Solicitante"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"Nombre completo:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.nombre_completo})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"Cédula:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.cedula})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"Email:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.email})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"Teléfono:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.telefono})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"Ciudad:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.direccion_ciudad})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"Barrio:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.direccion_barrio})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"Código Postal:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.direccion_postal})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-lg font-semibold text-green-600 dark:text-green-400",children:"Vivienda"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"Tipo de vivienda:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.tipo_vivienda})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"Propiedad de la vivienda:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.propiedad_vivienda})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"Tiene patio:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.tiene_patio})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"¿Permiten mascotas en alquiler?:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.permiten_mascotas_alquiler})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-lg font-semibold text-green-600 dark:text-green-400",children:"Convivientes"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"Cantidad de convivientes:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.cantidad_convivientes})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"¿Hay niños?:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.hay_ninos})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"Edades de los niños:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.edades_ninos})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"¿Todos están de acuerdo con la adopción?:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.todos_acuerdo_adopcion})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-lg font-semibold text-green-600 dark:text-green-400",children:"Otras Mascotas"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"¿Tiene otras mascotas?:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.tiene_otras_mascotas})]}),r.tiene_otras_mascotas==="si"&&r.otras_mascotas_detalles&&e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"Detalles de otras mascotas:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.otras_mascotas_detalles})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"¿Tuvo mascotas antes?:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.tuvo_mascotas_antes})]}),r.tuvo_mascotas_antes==="si"&&r.que_paso_mascotas_anteriores&&e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"¿Qué pasó con las mascotas anteriores?:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.que_paso_mascotas_anteriores})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-lg font-semibold text-green-600 dark:text-green-400",children:"Detalles de Adopción"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"¿Por qué desea adoptar?:"}),e.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-300",children:r.porque_adopta})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"¿Qué espera de la convivencia?:"}),e.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-300",children:r.que_espera_convivencia})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"¿Qué haría ante problemas de comportamiento?:"}),e.jsx("p",{className:"mt-1 text-gray-600 dark:text-gray-300",children:r.que_haria_problemas_comportamiento})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"¿Acepta visitas de seguimiento?:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.acepta_visitas_seguimiento})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-lg font-semibold text-green-600 dark:text-green-400",children:"Compromisos y Condiciones"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"¿Acepta proceso de evaluación?:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.acepta_proceso_evaluacion?"Sí":"No"})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"¿Acepta cuidado responsable?:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.acepta_cuidado_responsable?"Sí":"No"})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"¿Acepta contrato de adopción?:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.acepta_contrato_adopcion?"Sí":"No"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-lg font-semibold text-green-600 dark:text-green-400",children:"Mascota Solicitada"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"Nombre:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:(y=r.mascota)==null?void 0:y.nombre})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"Especie:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:(b=r.mascota)==null?void 0:b.especie})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"Raza:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:(p=r.mascota)==null?void 0:p.raza})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-lg font-semibold text-green-600 dark:text-green-400",children:"Estado de la Solicitud"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"Estado de la solicitud:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:r.estado})]}),e.jsxs("div",{className:"rounded-md border-gray-300 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"Fecha de solicitud:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:new Date(r.created_at).toLocaleDateString()})]}),r.estado==="Rechazada"&&r.comentario_rechazo&&e.jsxs("div",{className:"rounded-md border-red-300 bg-red-50 p-3 dark:border-red-600 dark:bg-red-900/20",children:[e.jsx("strong",{className:"text-green-600 dark:text-green-400",children:"Motivo de rechazo:"}),e.jsx("p",{className:"mt-1 text-red-600 dark:text-red-400",children:r.comentario_rechazo})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[g.user.role==="aliado"&&((j=r.mascota)==null?void 0:j.user_id)===g.user.id&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"rounded-md bg-green-600 px-6 py-2 font-semibold text-white shadow-md transition hover:bg-green-700 disabled:opacity-50",onClick:v,disabled:r.estado==="Aprobada",children:"Aprobar"}),e.jsx("button",{type:"button",className:"rounded-md bg-red-600 px-6 py-2 font-semibold text-white shadow-md transition hover:bg-red-700 disabled:opacity-50",onClick:()=>{n(""),i(!0)},disabled:r.estado==="Rechazada",children:"Rechazar"})]}),e.jsx("button",{type:"button",onClick:()=>d(null),className:"rounded-md bg-gray-200 px-6 py-2 font-semibold text-gray-700 transition hover:bg-gray-300 dark:bg-gray-600 dark:text-white dark:hover:bg-gray-500",children:"Cerrar"})]})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl bg-white p-6 shadow-2xl dark:bg-gray-800",children:[e.jsx("h3",{className:"mb-4 text-xl font-bold text-gray-800 dark:text-white",children:"Rechazar Solicitud"}),e.jsx("p",{className:"mb-4 text-gray-600 dark:text-gray-300",children:"¿Está seguro de que desea rechazar esta solicitud? Puede agregar un comentario explicando el motivo:"}),e.jsx("textarea",{value:t,onChange:a=>n(a.target.value),placeholder:"Motivo del rechazo (opcional)",rows:4,className:"w-full rounded-md border-gray-300 p-3 shadow-sm focus:border-red-500 focus:ring-red-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",maxLength:1e3}),e.jsxs("div",{className:"mt-2 text-right text-sm text-gray-500",children:[t.length,"/1000 caracteres"]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>{i(!1),n("")},className:"rounded-md bg-gray-200 px-6 py-2 font-semibold text-gray-700 transition hover:bg-gray-300 dark:bg-gray-600 dark:text-white dark:hover:bg-gray-500",children:"Cancelar"}),e.jsx("button",{type:"button",onClick:f,disabled:m,className:"rounded-md bg-red-600 px-6 py-2 font-semibold text-white shadow-md transition hover:bg-red-700 disabled:opacity-50",children:m?"Rechazando...":"Confirmar Rechazo"})]})]})})]}),e.jsx(R,{})]})}export{Z as default};
