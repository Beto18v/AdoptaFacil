import{r as y,j as e,K as v,m as w}from"./app-C9a0Z2GV.js";import{I as d}from"./input-error-CeM_PcsI.js";import{B as C}from"./button-Cd7vGOiK.js";import{I as u}from"./input-DOoS4fzs.js";import{L as m}from"./label-CyhaV5PO.js";import{L as f}from"./leaflet-src-BNGA5NSi.js";import"./index-wTHh6_rQ.js";delete f.Icon.Default.prototype._getIconUrl;f.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});function _({initialLat:x=4.6097,initialLng:g=-74.0817,onLocationChange:r,className:n=""}){const p=y.useRef(null),c=y.useRef(null),t=y.useRef(null),[j,h]=y.useState({lat:x,lng:g});y.useEffect(()=>{if(!p.current||c.current)return;const s=f.map(p.current).setView([x,g],13);f.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"漏 OpenStreetMap contributors",maxZoom:18}).addTo(s);const a=f.marker([x,g],{draggable:!0}).addTo(s);return a.on("dragend",function(l){const i=l.target.getLatLng();h({lat:i.lat,lng:i.lng}),r(i.lat,i.lng)}),s.on("click",function(l){const{lat:i,lng:b}=l.latlng;a.setLatLng([i,b]),h({lat:i,lng:b}),r(i,b)}),c.current=s,t.current=a,()=>{c.current&&(c.current.remove(),c.current=null)}},[x,g,r]);const o=async s=>{try{const l=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(s+", Colombia")}&limit=1`)).json();if(l.length>0){const{lat:i,lon:b}=l[0],N=parseFloat(i),k=parseFloat(b);c.current&&t.current&&(c.current.setView([N,k],15),t.current.setLatLng([N,k]),h({lat:N,lng:k}),r(N,k))}}catch(a){console.error("Error buscando direcci贸n:",a)}};return e.jsxs("div",{className:`space-y-4 ${n}`,children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Buscar direcci贸n (ej: Calle 123, Bogot谩)",className:"flex-1 rounded-md border border-gray-300 px-3 py-2 text-sm dark:border-gray-600 dark:bg-gray-700 dark:text-white",onKeyPress:s=>{s.key==="Enter"&&o(s.currentTarget.value)}}),e.jsx("button",{type:"button",onClick:s=>{const a=s.currentTarget.previousElementSibling;o(a.value)},className:"rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700",children:"Buscar"})]}),e.jsx("div",{ref:p,className:"h-64 w-full rounded-lg border border-gray-300 dark:border-gray-600"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Ubicaci贸n seleccionada:"})," ",j.lat.toFixed(6),", ",j.lng.toFixed(6)]}),e.jsx("p",{className:"text-xs",children:" Arrastra el marcador o haz click en el mapa para cambiar la ubicaci贸n"})]})]})}function D(){var s;const g=v().props.auth,{data:r,setData:n,post:p,processing:c,errors:t}=w({name:"",email:((s=g==null?void 0:g.user)==null?void 0:s.email)||"",description:"",address:"",city:"",phone:"",bank_name:"",account_type:"Ahorros",account_number:"",latitude:4.6097,longitude:-74.0817}),j=(a,l)=>{n("latitude",a),n("longitude",l)},h=a=>{var l;a.preventDefault(),p(route("shelter.store"),{headers:{"X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""}})},o="mt-2 block w-full p-3 bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400";return e.jsxs("div",{className:"mx-auto max-w-4xl space-y-6 rounded-2xl bg-gray-100 p-8 shadow-2xl dark:bg-gray-800",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Registra tu Fundaci贸n"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Completa la siguiente informaci贸n para que los donantes puedan conocerte y apoyarte."})]}),e.jsxs("form",{onSubmit:h,className:"space-y-8",children:[e.jsxs("fieldset",{className:"space-y-6",children:[e.jsx("legend",{className:"mb-4 border-b border-gray-300 pb-2 text-xl font-semibold text-gray-900 dark:border-gray-600 dark:text-white",children:"Informaci贸n General"}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"name",className:"font-semibold text-gray-700 dark:text-gray-300",children:"Nombre de la Fundaci贸n"}),e.jsx(u,{id:"name",name:"name",value:r.name,onChange:a=>n("name",a.target.value),className:o,required:!0}),e.jsx(d,{message:t.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"email",className:"font-semibold text-gray-700 dark:text-gray-300",children:"Correo Electr贸nico de Contacto"}),e.jsx(u,{id:"email",name:"email",value:r.email,readOnly:!0,className:`${o} cursor-not-allowed`})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"description",className:"font-semibold text-gray-700 dark:text-gray-300",children:"Descripci贸n o Misi贸n"}),e.jsx("textarea",{id:"description",name:"description",value:r.description,onChange:a=>n("description",a.target.value),className:o,rows:4,required:!0}),e.jsx(d,{message:t.description,className:"mt-2"})]})]}),e.jsxs("fieldset",{className:"space-y-6",children:[e.jsx("legend",{className:"mb-4 border-b border-gray-300 pb-2 text-xl font-semibold text-gray-900 dark:border-gray-600 dark:text-white",children:"Informaci贸n de Contacto"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"address",className:"font-semibold text-gray-700 dark:text-gray-300",children:"Direcci贸n"}),e.jsx(u,{id:"address",name:"address",value:r.address,onChange:a=>n("address",a.target.value),className:o,required:!0}),e.jsx(d,{message:t.address,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"city",className:"font-semibold text-gray-700 dark:text-gray-300",children:"Ciudad"}),e.jsx(u,{id:"city",name:"city",value:r.city,onChange:a=>n("city",a.target.value),className:o,required:!0}),e.jsx(d,{message:t.city,className:"mt-2"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(m,{htmlFor:"phone",className:"font-semibold text-gray-700 dark:text-gray-300",children:"Tel茅fono"}),e.jsx(u,{id:"phone",name:"phone",value:r.phone,onChange:a=>n("phone",a.target.value),className:o,required:!0}),e.jsx(d,{message:t.phone,className:"mt-2"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(m,{className:"mb-2 block font-semibold text-gray-700 dark:text-gray-300",children:"Ubicaci贸n en el Mapa"}),e.jsx(_,{initialLat:r.latitude,initialLng:r.longitude,onLocationChange:j}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Latitud: ",r.latitude.toFixed(6),", Longitud: ",r.longitude.toFixed(6)]}),e.jsx(d,{message:t.latitude,className:"mt-2"}),e.jsx(d,{message:t.longitude,className:"mt-2"})]})]}),e.jsxs("fieldset",{className:"space-y-6",children:[e.jsx("legend",{className:"mb-4 border-b border-gray-300 pb-2 text-xl font-semibold text-gray-900 dark:border-gray-600 dark:text-white",children:"Informaci贸n para Donaciones"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"bank_name",className:"font-semibold text-gray-700 dark:text-gray-300",children:"Nombre del Banco"}),e.jsx(u,{id:"bank_name",name:"bank_name",value:r.bank_name,onChange:a=>n("bank_name",a.target.value),className:o,required:!0}),e.jsx(d,{message:t.bank_name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(m,{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Tipo de Cuenta"}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:`flex cursor-pointer items-center justify-center rounded-lg p-3 text-center text-sm font-medium shadow-sm transition-all ${r.account_type==="Ahorros"?"bg-indigo-600 text-white ring-2 ring-indigo-500 ring-offset-2 dark:ring-offset-gray-800":"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600"}`,children:[e.jsx("input",{type:"radio",name:"account_type",value:"Ahorros",checked:r.account_type==="Ahorros",onChange:a=>n("account_type",a.target.value),className:"sr-only"}),"Ahorros"]}),e.jsxs("label",{className:`flex cursor-pointer items-center justify-center rounded-lg p-3 text-center text-sm font-medium shadow-sm transition-all ${r.account_type==="Corriente"?"bg-indigo-600 text-white ring-2 ring-indigo-500 ring-offset-2 dark:ring-offset-gray-800":"bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600"}`,children:[e.jsx("input",{type:"radio",name:"account_type",value:"Corriente",checked:r.account_type==="Corriente",onChange:a=>n("account_type",a.target.value),className:"sr-only"}),"Corriente"]})]}),e.jsx(d,{message:t.account_type,className:"mt-2"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(m,{htmlFor:"account_number",className:"font-semibold text-gray-700 dark:text-gray-300",children:"N煤mero de Cuenta"}),e.jsx(u,{id:"account_number",name:"account_number",value:r.account_number,onChange:a=>n("account_number",a.target.value.replace(/[^0-9]/g,"")),className:o,required:!0}),e.jsx(d,{message:t.account_number,className:"mt-2"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(C,{type:"submit",disabled:c,className:"w-full transform rounded-lg bg-gradient-to-r from-indigo-600 to-purple-600 px-8 py-3 font-bold text-white shadow-lg transition-transform hover:scale-105 hover:from-indigo-700 hover:to-purple-700 disabled:scale-100 disabled:opacity-50 md:w-auto",children:c?"Registrando...":"Registrar mi Fundaci贸n"})})]})]})}export{D as default};
