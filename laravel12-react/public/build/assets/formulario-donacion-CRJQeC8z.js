import{K as F,m as L,r as l,j as e}from"./app-C9a0Z2GV.js";import{I as j}from"./input-error-CeM_PcsI.js";import{B as M}from"./button-Cd7vGOiK.js";import{I as d}from"./input-DOoS4fzs.js";import{L as n}from"./label-CyhaV5PO.js";import"./index-wTHh6_rQ.js";function R({showModal:f,onClose:k,shelters:a}){const i=F().props.auth,{data:t,setData:s,post:v,processing:c,errors:m,reset:N,wasSuccessful:g,clearErrors:w}=L({donor_name:i.user.name||"",donor_email:i.user.email||"",amount:"",shelter_id:a.length===1?a[0].id.toString():"",payment_method:null}),[_,o]=l.useState(""),[u,x]=l.useState(!1);l.useEffect(()=>{g&&x(!0)},[g]);const h=r=>{const P=typeof r=="string"?Number(r):r;return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(P)},C=r=>{s("amount",r),o("")},S=r=>{o(r.target.value),s("amount",r.target.value)},b=r=>{s("payment_method",r)},D=r=>{r.preventDefault(),v(route("donaciones.store"),{preserveScroll:!0,onSuccess:()=>{}})},p=()=>{N(),o(""),x(!1)},y=()=>{p(),w(),k()},E=()=>{p()};return f?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-transparent backdrop-blur-sm",children:e.jsx("div",{className:"max-h-[95vh] w-full max-w-2xl overflow-y-auto rounded-lg bg-white shadow-xl dark:bg-gray-800",children:e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:u?"¡Gracias por tu Donación!":"Realizar una Donación"}),e.jsx("button",{onClick:y,className:"text-gray-500 transition hover:text-gray-700 dark:text-gray-400 dark:hover:text-white","aria-label":"Cerrar",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),u?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-green-100 dark:bg-green-900",children:e.jsx("svg",{className:"h-8 w-8 text-green-600 dark:text-green-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("p",{className:"mb-6 text-lg text-gray-600 dark:text-gray-300",children:"Tu generosa contribución ayudará a muchas mascotas. Hemos enviado un recibo a tu correo electrónico."}),e.jsx("button",{onClick:E,className:"mr-2 rounded-lg bg-blue-600 px-6 py-2 text-white transition hover:bg-blue-700",children:"Realizar otra donación"}),e.jsx("button",{onClick:y,className:"rounded-lg bg-gray-300 px-6 py-2 text-gray-800 transition hover:bg-gray-400 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cerrar"})]}):e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("fieldset",{className:"space-y-4 rounded-lg border p-4 dark:border-gray-700",children:[e.jsx("legend",{className:"px-2 font-medium text-gray-700 dark:text-gray-300",children:"Tus Datos"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"donor_name",children:"Nombre del Donante"}),e.jsx(d,{id:"donor_name",value:t.donor_name,readOnly:!0,className:"mt-1 cursor-not-allowed bg-gray-100 dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"donor_email",children:"Correo Electrónico"}),e.jsx(d,{id:"donor_email",type:"email",value:t.donor_email,readOnly:!0,className:"mt-1 cursor-not-allowed bg-gray-100 dark:bg-gray-700"})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"shelter_id",className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Selecciona una fundación"}),e.jsxs("select",{id:"shelter_id",name:"shelter_id",value:t.shelter_id,onChange:r=>s("shelter_id",r.target.value),className:"w-full rounded-lg border-gray-300 p-3 disabled:cursor-not-allowed disabled:bg-gray-100 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:disabled:bg-gray-600",required:!0,disabled:a.length===1,children:[a.length>1&&e.jsx("option",{value:"",children:"-- Elige una fundación --"}),a.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),e.jsx(j,{message:m.shelter_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Selecciona un monto (COP)"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4",children:["20000","50000","100000","200000"].map(r=>e.jsx("button",{type:"button",onClick:()=>C(r),className:`rounded-lg p-3 text-center transition ${t.amount===r?"bg-purple-600 text-white shadow-lg ring-2 ring-purple-400":"bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600"}`,children:h(r)},r))}),e.jsx(j,{message:m.amount,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"custom-amount",className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"O ingresa un monto personalizado"}),e.jsx(d,{id:"custom-amount",type:"number",value:_,onChange:S,placeholder:"Ej: 10000(min)",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx(n,{className:"mb-2 block text-center text-sm font-medium text-gray-700 dark:text-gray-300",children:"Selecciona tu método de pago"}),e.jsxs("div",{className:"mt-2 flex justify-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("button",{type:"button",onClick:()=>b("pse"),className:`flex h-20 w-32 items-center justify-center rounded-lg border-2 p-3 transition-all ${t.payment_method==="pse"?"border-blue-700 bg-blue-300 ring-2 ring-blue-700":"border-gray-300 dark:border-gray-600 dark:bg-gray-700"}`,children:e.jsx("img",{src:"https://d1ih8jugeo2m5m.cloudfront.net/2023/05/pse-1-300x300.png",alt:"PSE",className:"h-24 w-auto"})}),t.payment_method==="pse"&&e.jsx("p",{className:"mt-2 text-sm font-semibold text-blue-600 dark:text-blue-400",children:"PSE"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("button",{type:"button",onClick:()=>b("tarjeta"),className:`flex h-20 w-32 items-center justify-center rounded-lg border-2 p-3 transition-all ${t.payment_method==="tarjeta"?"border-green-700 bg-green-300 ring-2 ring-green-700":"border-gray-300 dark:border-gray-600 dark:bg-gray-700"}`,children:e.jsx("img",{src:"https://images.vexels.com/media/users/3/263269/isolated/preview/a461aa900b9a0fc2c3b1533899ed29d0-icono-de-tarjetas-de-visita-de-dinero.png",alt:"Tarjeta",className:"h-16 w-auto"})}),t.payment_method==="tarjeta"&&e.jsx("p",{className:"mt-2 text-sm font-semibold text-green-600 dark:text-green-400",children:"Tarjeta"})]})]})]}),e.jsx("div",{className:"mt-8 text-right",children:e.jsx(M,{type:"submit",disabled:c||!t.amount||!t.shelter_id||!t.payment_method,className:"w-full rounded-lg bg-purple-600 px-6 py-3 text-white transition hover:bg-purple-700 disabled:cursor-not-allowed disabled:bg-gray-400 disabled:opacity-50",children:c?"Procesando...":`Donar ${t.amount?h(t.amount):""}`})})]})]})})}):null}export{R as default};
